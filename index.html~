<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Network Troubleshooter</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <script type="text/javascript" src="js/jquery-1.8.2.min.js"> </script> 
    <!-- Le styles -->
    <link href="less/bootstrap.less" rel="stylesheet">
    <link href="less/bootstrap.css" rel="stylesheet">
    
    <link href="less/style.css" rel="stylesheet">
    <style type="text/css">
      body {
        padding-top: 60px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
    </style>
    <link href="less/responsive-1200px-min.less.less" rel="stylesheet">
    <link href="less/bootstrap-responsive.css" rel="stylesheet">
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <link rel="shortcut icon" href="../assets/ico/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="#">Amahi</a>
          <div class="nav-collapse collapse">
           <!-- <ul class="nav">
              <li class="active"><a href="#">Home</a></li>
              <li><a href="#about">About</a></li>
              <li><a href="#contact">Contact</a></li>
            </ul> -->
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span12">          
	 <h2>Interactive Network Troubleshooter</h2>	
        </div>
	</div><!--/row-->

      <div class="row-fluid" id="welcome">
	<div class = "hero-unit span12" >
		<p>Having network trouble after your Amahi installation?  Use this interactive troubleshooter to help you pinpoint problems.  If possible, we'll provide possible solutions. If you need more assistance stop by the <a href ="http://talk.amahi.org/">IRC web interface</a>.  Please have the information generated by this troubleshooter nearby.</p>
	
		<button id="go-inter" class="btn btn-primary span4 btn-large btn-success">Interactive Version</button>
		
		<button id="go-print" class="btn span4 btn-primary btn-large btn-info">Print Version</button>
		
	  </div>
 	</div><!--/row-->
     <!-- <div class="row-fluid">
	<div class= "span12" id="insertHere">
 	</div>
      </div> --> <!-- /row -->
	<hr>
      <div class="row-fluid">
	<div class="span6" id="step-column">


  <div class="hidden" id="step1">
	 <h3>Step 1:  </h3>
	<p>What is your HDA <em>internal</em> IP address?
	<br>If you're unsure, you can see it in your 
	<a target="_new" href="https://www.amahi.org/user">Amahi.org Control Panel</a>.<br>It should start with one of:
	<ul><li><strong>192.168.</strong></li>
	     <li><strong>10.</strong></li>
	     <li><strong>172.16.</strong></li></ul>
	<br>
	<div class="input-append"><input id= "ipAddress" type="text" class="span3" placeholder="19x.16x.x.1x"><input id="ip-address" type="submit" class="btn" value="Continue"></input>
	
	  </div><!-- input-append -->
   </div><!--/step1-->

   <div class="hidden" id="step2">
	<h3>Step 2</h3>
	<p>What is your HDA Home Domain? (Note that the default is <strong>amahi.net</strong>)
	<br/>
	If you are unsure, you can see it in your <a href="https://www.amahi.org/user" target="_new">Amahi.org Control Panel</a>.
	<br/></p> 
	  <div class="input-append"><input id= "domain" placeholder="amahi.net"type="text" class="span3 "><input id="domain-id" type="submit" class="btn" value="Continue"></input>	
	  </div><!-- /input-append -->
   </div> <!-- /step2 -->

   <div class="hidden" id="step3">
	<h3>Step 3</h3>
	What is your router IP address?
	<br/>
	Here's <a href="http://wiki.amahi.org/index.php/Find_Your_Gateway_IP" target="_new">how to find it</a>, if you're not sure.
	<br/> 
	<br/>
	  <div class="input-append"><input id= "gatewayIP" placeholder="19x.16x.x.x"type="text" class="span3 "><input id="gateway-id" type="submit" class="btn" value="Continue"></input>	
	  </div><!-- input-append -->

   </div> <!-- step3 -->

   <div class="hidden" id= "step4">
	<h3>Step 4 - DNS resolving for internal hostnames</h3>
	For the next questions, unless you have internet access working on your HDA, you should SSH into your HDA from another computer, to copy and paste commands and results when needed.
	<br/>
	You can read instructions on how to SSH into your HDA <a href="http://wiki.amahi.org/index.php/SSHtoHDA">here</a>.
	<hr/>
	Execute the following command on the HDA itself, using either SSH, or a Terminal:
	<pre>nslookup hda</pre>
	Does it result in something like this (verify the parts in <strong class= "text-error" >red</strong>):
	<pre>
Server:    <strong class= "text-error" >1</strong>
Address:    1#53

Name:    <strong class= "text-error" >hda.<span id="amdom"></span></strong>
Address:    <strong class= "text-error" >1</strong>
	</pre>
	<br/>
	 <form >
	 <div id="dnsFourX" class="btn-group" data-toggle="buttons-radio">
	  <button type="button" name="dns-yes" value="yes" class="yesBtn btn" >Yes</button>	
	  <button type="button" name="dns-no" value="no" class="noBtn btn">No</button>
	</div>	

	  <input class="hidden" id="dnsFour" value="0" type="text">
	  <button id="dnsYesNo" type="submit" onclick="return false" class="btn">Continue</button>

	</form>

   </div> <!--step4-->

   <div id="step4TS" class="hidden">
	<h3><span class="text-error" >Troubleshooting for Step 4</span> - DNS Resolving for Internal Hostnames</h3>
	<input type="hidden" name="last_step" value="4">
	<p>Execute the following commands on the HDA itself, using either SSH, or a Terminal:
	<pre>su -<em>(enter the root password)</em><br>nslookup hda<br>cat /etc/resolv.conf<br>ifconfig | grep -A 5 eth0 | grep inet<br>service named status<br>cat /etc/named.conf<br>netstat -an | grep :53<br>cat /var/named/dynamic/hda-n2a.conf<br>cat /var/named/dynamic/hda-a2n.conf</pre> </p>
	<ol><li>Copy the text generated by the commands into a new paste at <a href="http://pastebin.ubuntu.com" target="blank">pastebin.ubuntu.com</a>.</li>
		<li>After submitting your paste, copy the generated url (from the url bar).</li>
		<li>Head over to the <a href="http://talk.amahi.org" target="blank">Amahi IRC channel</a>, and share your link with one of the helpful folks there.</li></ol>
	<p class = "text-info"><i>Good Luck! Thanks for choosing Amahi.</i></p>
    </div> <!-- step4TS -->

    <div id="step5" class="hidden">
     <h2>Step 5 - Router is reachable?</h2>
     <p>Execute the following command on the HDA itself, using either SSH, or a Terminal:</p>
  		<pre>ping -c 1 router</pre>
	<p>Does it result in something like this (verify the parts in <strong class= "text-error" >red</strong>):<p>
	<pre>PING <strong class= "text-error" >router.<span id="amdom2"></span> </strong> (<strong class= "text-error" ><span id="gateIp"></span></strong>) 56(84) bytes of data.<br>
64 bytes from router.<span id="amdom3"></span> (<strong class= "text-error" ><span id="gateIp2"></spam> </strong> ): icmp_seq=1 ttl=xxx time=0.xxx ms <br>
	<br>
--- router.<span id="amdom4"></span> ping statistics ---<br>
1 packets transmitted, <strong class= "text-error" >1 received, 0% packet loss</strong>, time 1ms<br>
rtt min/avg/max/mdev = 0.xxx/0.xxx/0.xxx/0.000 ms
	</pre><br>
	 <form >
	 <div id="gatewayFiveX" class="btn-group" data-toggle="buttons-radio">
	  <button type="button" name="gateway-yes" value="yes" class="yesBtn btn" >Yes</button>	
	  <button type="button" name="gateway-no" value="no" class="noBtn btn">No</button>
	</div>	

	  <input class="hidden" id="gatewayFive" value="0" type="text">
	  <button id="gatewayYesNo" type="submit" onclick="return false" class="btn">Continue</button>

	</form>


    </div>  <!--/step5-->
    
    <div id="step5TS" class="hidden">
	<h3>Troubleshooting for Step 5 - Router is reachable?</h3>
		<p>If you have multiple network adapters on your server (maybe an onboard, and a PCI), make sure the cable is plugged in the correct adapter. If you're using Amahi, it needs to be plugged in the adapter identified as eth0. Trying to plug the cable in the other adapter, then retrying the last test, wouldn't hurt!</p><br>
		<p>If the above doesn't help, execute the following commands on the HDA itself, using either SSH, or a Terminal:
		<pre>netstat -nr<br>
arp -a<br>
traceroute -q 1 -m 5 router</pre>
			<ol><li>Copy the text generated by the commands into a new paste at <a href="http://pastebin.ubuntu.com" target="blank">pastebin.ubuntu.com</a>.</li>
		<li>After submitting your paste, copy the generated url (from the url bar).</li>
		<li>Head over to the <a href="http://talk.amahi.org" target="blank">Amahi IRC channel</a>, and share your link with one of the helpful folks there.</li></ol>
	 	<p class = "text-info"><i>Good Luck! Thanks for choosing Amahi.</i></p>
    </div>  <!-- /step5TS-->

	</div> <!--/span6-->
      

        <div class="span6" id="solution-column">
	<h3 id="progress" class="hidden">Progress</h3>
	  <div class= "span12" id="insertHere">
	  </div>

 	  
	</div> <!--/span6-->

      </div><!--/row-->

      <hr>

      <footer>
        <p>&copy; Company 2012</p>
      </footer>

    </div><!--/.fluid-container-->

    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
<!--    <script src="js/scripts.js" type="text/javascript" > </script> -->
    <script src="js/AINT.js" type="text/javascript" > </script>
   <!--<script src="../assets/js/jquery.js"></script>
    <script src="../assets/js/bootstrap-transition.js"></script> -->
    <script src="js/bootstrap-alert.js"></script>
    <script src="js/bootstrap-button.js"></script>
  <!--  <script src="../assets/js/bootstrap-modal.js"></script>
    <script src="../assets/js/bootstrap-dropdown.js"></script>
    <script src="../assets/js/bootstrap-scrollspy.js"></script>
    <script src="../assets/js/bootstrap-tab.js"></script>
    <script src="../assets/js/bootstrap-tooltip.js"></script>
    <script src="../assets/js/bootstrap-popover.js"></script>
    --><script src="js/bootstrap-collapse.js"></script> <!--
    <script src="../assets/js/bootstrap-carousel.js"></script>
    <script src="../assets/js/bootstrap-typeahead.js"></script> -->

  </body>
</html>
